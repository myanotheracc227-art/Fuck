-- Scratch Style UI Library - FIXED VERSION

local Library = {}

local TweenService = game:GetService("TweenService")

function Library:CreateWindow(title)

local player = game.Players.LocalPlayer

-- ScreenGui  

local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))  

gui.Name = "ScratchStyleHub"  

gui.ResetOnSpawn = false  

gui.IgnoreGuiInset = true  

  

-- RedLine  

local RedLine = Instance.new("TextButton")  

RedLine.Name = "RedLine"  

RedLine.Size = UDim2.new(0, 90, 0, 8)  

RedLine.Position = UDim2.new(0.5, -45, 0, 6)  

RedLine.BackgroundColor3 = Color3.fromRGB(255, 0, 0)  

RedLine.BackgroundTransparency = 1  

RedLine.BorderSizePixel = 0  

RedLine.Text = ""  

RedLine.Parent = gui  

Instance.new("UICorner", RedLine).CornerRadius = UDim.new(1, 0)  

  

-- Main Frame  

local mainFrame = Instance.new("Frame")  

mainFrame.Size = UDim2.new(0, 460, 0, 350)  

mainFrame.Position = UDim2.new(0.5, -230, 0.5, -175)  

mainFrame.BackgroundColor3 = Color3.fromRGB(235, 235, 235)  

mainFrame.BorderSizePixel = 0  

mainFrame.ZIndex = 1  

mainFrame.Parent = gui  

Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 15)  

  

local stroke = Instance.new("UIStroke")  

stroke.Thickness = 2.5  

stroke.Color = Color3.new(0, 0, 0)  

stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

stroke.Parent = mainFrame  

  

task.spawn(function()  

	while stroke and stroke.Parent do  		TweenService:Create(stroke, TweenInfo.new(1.5), {Color = Color3.new(1, 1, 1)}):Play()  

		wait(1.5)  

		TweenService:Create(stroke, TweenInfo.new(1.5), {Color = Color3.new(0, 0, 0)}):Play()  

		wait(1.5)  

	end  

end)  

  

local scale = Instance.new("UIScale")  

scale.Scale = 1  

scale.Parent = mainFrame  

  

-- Sidebar WITH SCROLLING

local sideLabel = Instance.new("Frame")

sideLabel.Size = UDim2.new(0, 110, 0, 350)

sideLabel.Position = UDim2.new(0, -115, 0, 0)

sideLabel.BackgroundColor3 = Color3.fromRGB(200, 200, 200)

sideLabel.BorderSizePixel = 0

sideLabel.ZIndex = 4

sideLabel.ClipsDescendants = true

sideLabel.Parent = mainFrame

Instance.new("UICorner", sideLabel).CornerRadius = UDim.new(0, 15)

local sidebarTopImage = Instance.new("ImageLabel")

sidebarTopImage.Size = UDim2.new(1, 0, 0, 50)

sidebarTopImage.Position = UDim2.new(0, 0, 0, 5)

sidebarTopImage.BackgroundTransparency = 1

sidebarTopImage.Image = "rbxassetid://81758008122860"

sidebarTopImage.ZIndex = 5

sidebarTopImage.Parent = sideLabel

-- ADD SCROLLING FRAME FOR TABS

local sidebarScrollFrame = Instance.new("ScrollingFrame")

sidebarScrollFrame.Name = "TabScrollFrame"

sidebarScrollFrame.Size = UDim2.new(1, 0, 1, -60)

sidebarScrollFrame.Position = UDim2.new(0, 0, 0, 60)

sidebarScrollFrame.BackgroundTransparency = 1

sidebarScrollFrame.BorderSizePixel = 0

sidebarScrollFrame.ScrollBarThickness = 4

sidebarScrollFrame.ScrollBarImageColor3 = Color3.new(0, 0, 0)

sidebarScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

sidebarScrollFrame.ZIndex = 5

sidebarScrollFrame.Parent = sideLabel

local sidebarLayout = Instance.new("UIListLayout")

sidebarLayout.SortOrder = Enum.SortOrder.LayoutOrder

sidebarLayout.Padding = UDim.new(0, 10)

sidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

sidebarLayout.Parent = sidebarScrollFrame

-- Add padding at the top to push first tab down

local topPadding = Instance.new("UIPadding")

topPadding.PaddingTop = UDim.new(0, 10)

topPadding.Parent = sidebarScrollFrame

sidebarLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()

	sidebarScrollFrame.CanvasSize = UDim2.new(0, 0, 0, sidebarLayout.AbsoluteContentSize.Y + 10)

end)

local sidebarStroke = Instance.new("UIStroke")

sidebarStroke.Thickness = 2.5

sidebarStroke.Color = Color3.new(0, 0, 0)

sidebarStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

sidebarStroke.Parent = sideLabel

  

task.spawn(function()  

	while sidebarStroke and sidebarStroke.Parent do  

		TweenService:Create(sidebarStroke, TweenInfo.new(1.5), {Color = Color3.new(1, 1, 1)}):Play()  

		wait(1.5)  

		TweenService:Create(sidebarStroke, TweenInfo.new(1.5), {Color = Color3.new(0, 0, 0)}):Play()  

		wait(1.5)  

	end  

end)  

  

-- Scrollable section

local whiteUnderFrame = Instance.new("Frame")  

whiteUnderFrame.Size = UDim2.new(0, 440, 0, 260)  

whiteUnderFrame.Position = UDim2.new(0.5, -220, 0, 74)  

whiteUnderFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)  

whiteUnderFrame.BackgroundTransparency = 0.2  

whiteUnderFrame.BorderSizePixel = 0  

whiteUnderFrame.ZIndex = 98  

whiteUnderFrame.ClipsDescendants = true  

whiteUnderFrame.Parent = mainFrame  

Instance.new("UICorner", whiteUnderFrame).CornerRadius = UDim.new(0, 12)  

  

local whiteUnderStroke = Instance.new("UIStroke")  

whiteUnderStroke.Thickness = 2  

whiteUnderStroke.Color = Color3.new(0, 0, 0)  

whiteUnderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

whiteUnderStroke.ZIndex = 98  

whiteUnderStroke.Parent = whiteUnderFrame  

  

-- O Button (INSTANT DESTROY)  

local oButton = Instance.new("TextButton")  

oButton.Name = "OButton"  

oButton.Size = UDim2.new(0, 66, 0, 42)  

oButton.Position = UDim2.new(1, 8, 0, 0)  

oButton.BackgroundColor3 = Color3.fromRGB(220, 220, 220)  

oButton.Text = "O"  

oButton.Font = Enum.Font.GothamBold  

oButton.TextSize = 26  

oButton.TextColor3 = Color3.new(0, 0, 0)  

oButton.BorderSizePixel = 0  

oButton.ZIndex = 4  

oButton.Parent = mainFrame  

Instance.new("UICorner", oButton).CornerRadius = UDim.new(0, 8)  

  

local oStroke = Instance.new("UIStroke")  

oStroke.Color = Color3.new(0, 0, 0)  

oStroke.Thickness = 2  

oStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

oStroke.Parent = oButton  

  

oButton.MouseButton1Click:Connect(function()  

	gui:Destroy()  

end)  

-- GreyLine  

local GreyLine = Instance.new("TextButton")  

GreyLine.Name = "GreyLine"  

GreyLine.Size = UDim2.new(0, 90, 0, 8)  

GreyLine.Position = UDim2.new(0.5, -45, 0, -12)  

GreyLine.BackgroundColor3 = Color3.fromRGB(180, 180, 180)  

GreyLine.BorderSizePixel = 0  

GreyLine.Text = ""  

GreyLine.ZIndex = 3  

GreyLine.Parent = mainFrame  

Instance.new("UICorner", GreyLine).CornerRadius = UDim.new(1, 0)  

  

-- Background image  

local bgImage = Instance.new("ImageLabel")  

bgImage.Size = UDim2.new(1, 0, 1, 0)  

bgImage.Position = UDim2.new(0, 0, 0, 0)  

bgImage.BackgroundTransparency = 1  

bgImage.Image = "rbxassetid://80616469959510"  

bgImage.ZIndex = 2  

bgImage.Parent = mainFrame  

  

-- Headers  

local headerText = Instance.new("TextLabel")  

headerText.Size = UDim2.new(0, 20, 0, 20)  

headerText.Position = UDim2.new(0.5, -10, 0, 0)  

headerText.BackgroundTransparency = 1  

headerText.Text = "2"  

headerText.Font = Enum.Font.GothamBold  

headerText.TextSize = 14  

headerText.TextColor3 = Color3.new(0, 0, 0)  

headerText.ZIndex = 4  

headerText.Parent = mainFrame  

  

local tabTitle = Instance.new("TextLabel")  

tabTitle.Size = UDim2.new(0, 300, 0, 30)  

tabTitle.Position = UDim2.new(0.5, -150, 0, 35)  

tabTitle.BackgroundTransparency = 1  

tabTitle.Text = " | " .. title  

tabTitle.Font = Enum.Font.GothamBold  

tabTitle.TextSize = 20  

tabTitle.TextColor3 = Color3.new(0, 0, 0)  

tabTitle.TextXAlignment = Enum.TextXAlignment.Center  

tabTitle.ZIndex = 4  

tabTitle.Parent = mainFrame  

  

local underline = Instance.new("Frame")  

underline.Size = UDim2.new(0, 420, 0, 2)  

underline.Position = UDim2.new(0.5, -210, 0, 65)  

underline.BackgroundColor3 = Color3.new(0, 0, 0)  

underline.BorderSizePixel = 0  

underline.ZIndex = 4  

underline.Parent = mainFrame  

  

-- GreyLine Shrink Logic  

local isShrunk = false  

local originalMainPos = mainFrame.Position  

local originalScale = 1  

local originalGreyPos = GreyLine.Position  

local originalGreyParent = mainFrame  

  

GreyLine.MouseButton1Click:Connect(function()  

	if not isShrunk then  

		isShrunk = true  

		local cam = workspace.CurrentCamera  

		local guiInset = game:GetService("GuiService"):GetGuiInset()  

		local redCenter = RedLine.AbsolutePosition + RedLine.AbsoluteSize / 2  

		local screenCenter = cam.ViewportSize / 2  

		local offsetX = redCenter.X - screenCenter.X  

		local offsetY = redCenter.Y - screenCenter.Y - guiInset.Y  

		local targetPos = UDim2.new(0.5, offsetX, 0.5, offsetY)  

		  

		local shrinkTween = TweenService:Create(mainFrame, TweenInfo.new(0.5), {Position = targetPos})  

		local scaleTween = TweenService:Create(scale, TweenInfo.new(0.5), {Scale = 0.05})  

		  

		local absPos = GreyLine.AbsolutePosition  

		local absSize = GreyLine.AbsoluteSize  

		GreyLine.Parent = gui  

		GreyLine.Size = UDim2.new(0, absSize.X, 0, absSize.Y)  

		GreyLine.Position = UDim2.new(0, absPos.X, 0, absPos.Y)  

		  

		local greyTween = TweenService:Create(GreyLine, TweenInfo.new(0.5), {Position = RedLine.Position})  

		  

		shrinkTween:Play()  

		scaleTween:Play()  

		greyTween:Play()  

	else  

		isShrunk = false  

		local resetTween = TweenService:Create(mainFrame, TweenInfo.new(0.5), {Position = originalMainPos})  

		local scaleBack = TweenService:Create(scale, TweenInfo.new(0.5), {Scale = originalScale})  

		local greyTweenBack = TweenService:Create(GreyLine, TweenInfo.new(0.5), {Position = originalGreyPos})  

		  

		GreyLine.Parent = originalGreyParent  

		resetTween:Play()  

		scaleBack:Play()  

		greyTweenBack:Play()  

	end  

end)  

  

-- Sound effect on click  

local clickSound = Instance.new("Sound")  

clickSound.SoundId = "rbxassetid://10066921516"  

clickSound.Volume = 1  

clickSound.Name = "ClickSound"  

clickSound.Parent = gui  

  

-- Bind all TextButtons to play click sound  

for _, obj in ipairs(gui:GetDescendants()) do  

	if obj:IsA("TextButton") then  

		obj.MouseButton1Click:Connect(function()  

			clickSound:Play()  

		end)  

	end  

end  

  

-- Window object to return  

local Window = {  

	Gui = gui,  

	MainFrame = mainFrame,  

	SideLabel = sideLabel,  

	SidebarScrollFrame = sidebarScrollFrame,  

	WhiteUnderFrame = whiteUnderFrame,  

	ClickSound = clickSound,  

	Sections = {},  

	TabButtons = {},  

	TabIndex = 0,
	SettingsOpen = false
}

-- Settings Button (BELOW O BUTTON)

local settingsButton = Instance.new("ImageButton")

settingsButton.Name = "SettingsButton"

settingsButton.Size = UDim2.new(0, 66, 0, 42)

settingsButton.Position = UDim2.new(1, 8, 0, 50)

settingsButton.BackgroundColor3 = Color3.fromRGB(220, 220, 220)

settingsButton.Image = "rbxassetid://127708531914326"
settingsButton.BorderSizePixel = 0
settingsButton.ZIndex = 4
settingsButton.ImageTransparency = 0
settingsButton.ScaleType = Enum.ScaleType.Fit
settingsButton.Rotation = 0  -- FIXED: Use Rotation property

local imagePadding = Instance.new("UIPadding")
imagePadding.PaddingLeft = UDim.new(0, 8)
imagePadding.PaddingRight = UDim.new(0, 8)
imagePadding.PaddingTop = UDim.new(0, 8)
imagePadding.PaddingBottom = UDim.new(0, 8)
imagePadding.Parent = settingsButton

settingsButton.Parent = mainFrame

Instance.new("UICorner", settingsButton).CornerRadius = UDim.new(0, 8)

local settingsStroke = Instance.new("UIStroke")

settingsStroke.Color = Color3.new(0, 0, 0)

settingsStroke.Thickness = 2

settingsStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

settingsStroke.Parent = settingsButton

-- Create settings tabs container

local settingsTabsContainer = Instance.new("Frame")

settingsTabsContainer.Name = "SettingsTabsContainer"

settingsTabsContainer.Size = UDim2.new(1, -20, 1, -20)

settingsTabsContainer.Position = UDim2.new(0, 10, 0, -260)

settingsTabsContainer.BackgroundTransparency = 1

settingsTabsContainer.BorderSizePixel = 0

settingsTabsContainer.Visible = false

settingsTabsContainer.ZIndex = 99

settingsTabsContainer.Parent = whiteUnderFrame

-- Create fixed settings tabs

local settingsTabs = {}

local settingsTabNames = {"Settings", "Privacy", "Display", "Chat"}

for i, tabName in ipairs(settingsTabNames) do

	local settingsScrollFrame = Instance.new("ScrollingFrame")

	settingsScrollFrame.Name = tabName .. "Tab"

	settingsScrollFrame.Size = UDim2.new(1, 0, 1, 0)

	settingsScrollFrame.Position = UDim2.new(0, 0, 0, 0)

	settingsScrollFrame.BackgroundTransparency = 1

	settingsScrollFrame.BorderSizePixel = 0

	settingsScrollFrame.ScrollBarThickness = 6

	settingsScrollFrame.ScrollBarImageColor3 = Color3.new(0, 0, 0)

	settingsScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

	settingsScrollFrame.Visible = (i == 1)

	settingsScrollFrame.ZIndex = 99

	settingsScrollFrame.Parent = settingsTabsContainer

	

	local settingsLayout = Instance.new("UIListLayout")

	settingsLayout.SortOrder = Enum.SortOrder.LayoutOrder

	settingsLayout.Padding = UDim.new(0, 15)

	settingsLayout.Parent = settingsScrollFrame

	

	local settingsPadding = Instance.new("UIPadding")

	settingsPadding.PaddingLeft = UDim.new(0, 10)

	settingsPadding.PaddingTop = UDim.new(0, 10)

	settingsPadding.Parent = settingsScrollFrame

	

	settingsLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()

		settingsScrollFrame.CanvasSize = UDim2.new(0, 0, 0, settingsLayout.AbsoluteContentSize.Y + 20)

	end)

	

	settingsTabs[tabName] = settingsScrollFrame

end

-- Add profile info to Settings tab only

local profileContainer = Instance.new("Frame")

profileContainer.Size = UDim2.new(1, -20, 0, 120)

profileContainer.BackgroundColor3 = Color3.fromRGB(240, 240, 240)

profileContainer.BorderSizePixel = 0

profileContainer.ZIndex = 100  -- FIXED: Higher ZIndex
profileContainer.LayoutOrder = 1

profileContainer.Parent = settingsTabs["Settings"]

Instance.new("UICorner", profileContainer).CornerRadius = UDim.new(0, 12)

local profileStroke = Instance.new("UIStroke")

profileStroke.Color = Color3.new(0, 0, 0)

profileStroke.Thickness = 2

profileStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

profileStroke.Parent = profileContainer

local profileImage = Instance.new("ImageLabel")

profileImage.Size = UDim2.new(0, 80, 0, 80)

profileImage.Position = UDim2.new(0, 15, 0.5, 0)

profileImage.AnchorPoint = Vector2.new(0, 0.5)

profileImage.BackgroundColor3 = Color3.fromRGB(200, 200, 200)

profileImage.BorderSizePixel = 0

profileImage.Image = "rbxthumb://type=AvatarHeadShot&id=" .. player.UserId .. "&w=150&h=150"

profileImage.ZIndex = 101

profileImage.Parent = profileContainer

Instance.new("UICorner", profileImage).CornerRadius = UDim.new(1, 0)

local profileImageStroke = Instance.new("UIStroke")

profileImageStroke.Color = Color3.new(0, 0, 0)

profileImageStroke.Thickness = 2

profileImageStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

profileImageStroke.Parent = profileImage

local infoContainer = Instance.new("Frame")

infoContainer.Size = UDim2.new(1, -110, 1, -20)

infoContainer.Position = UDim2.new(0, 105, 0, 10)

infoContainer.BackgroundTransparency = 1

infoContainer.ZIndex = 101

infoContainer.Parent = profileContainer

local executorName = (identifyexecutor and identifyexecutor()) or "Unknown"

local usernameLabel = Instance.new("TextLabel")

usernameLabel.Size = UDim2.new(1, 0, 0, 20)

usernameLabel.Position = UDim2.new(0, 0, 0, 0)

usernameLabel.BackgroundTransparency = 1

usernameLabel.Text = "@" .. player.Name
usernameLabel.Font = Enum.Font.GothamBold

usernameLabel.TextSize = 15

usernameLabel.TextColor3 = Color3.new(0, 0, 0)

usernameLabel.TextXAlignment = Enum.TextXAlignment.Left

usernameLabel.TextYAlignment = Enum.TextYAlignment.Top

usernameLabel.ZIndex = 102

usernameLabel.Parent = infoContainer

local userIdLabel = Instance.new("TextLabel")

userIdLabel.Size = UDim2.new(1, 0, 0, 20)

userIdLabel.Position = UDim2.new(0, 0, 0, 22)

userIdLabel.BackgroundTransparency = 1

userIdLabel.Text = "User ID: " .. player.UserId

userIdLabel.Font = Enum.Font.Gotham

userIdLabel.TextSize = 14

userIdLabel.TextColor3 = Color3.new(0, 0, 0)

userIdLabel.TextXAlignment = Enum.TextXAlignment.Left

userIdLabel.TextYAlignment = Enum.TextYAlignment.Top

userIdLabel.ZIndex = 102

userIdLabel.Parent = infoContainer

local executorLabel = Instance.new("TextLabel")

executorLabel.Size = UDim2.new(1, 0, 0, 20)

executorLabel.Position = UDim2.new(0, 0, 0, 44)

executorLabel.BackgroundTransparency = 1

executorLabel.Text = "Executor: " .. executorName

executorLabel.Font = Enum.Font.Gotham

executorLabel.TextSize = 14

executorLabel.TextColor3 = Color3.new(0, 0, 0)

executorLabel.TextXAlignment = Enum.TextXAlignment.Left

executorLabel.TextYAlignment = Enum.TextYAlignment.Top

executorLabel.ZIndex = 102

executorLabel.Parent = infoContainer

local rankLabel = Instance.new("TextLabel")

rankLabel.Size = UDim2.new(1, 0, 0, 20)

rankLabel.Position = UDim2.new(0, 0, 0, 66)

rankLabel.BackgroundTransparency = 1

rankLabel.Text = "Rank: Member"

rankLabel.Font = Enum.Font.Gotham

rankLabel.TextSize = 14

rankLabel.TextColor3 = Color3.new(0, 0, 0)

rankLabel.TextXAlignment = Enum.TextXAlignment.Left

rankLabel.TextYAlignment = Enum.TextYAlignment.Top

rankLabel.ZIndex = 102

rankLabel.Parent = infoContainer

-- Create settings tab buttons in sidebar

local settingsTabButtons = {}

for i, tabName in ipairs(settingsTabNames) do

	local tabButton = Instance.new("TextButton")

	tabButton.Size = UDim2.new(0, 90, 0, 26)

	tabButton.LayoutOrder = 1000 + i

	tabButton.BackgroundColor3 = Color3.fromRGB(230, 230, 230)

	tabButton.Text = tabName

	tabButton.Font = Enum.Font.Gotham

	tabButton.TextSize = 14

	tabButton.TextColor3 = Color3.new(0, 0, 0)

	tabButton.BorderSizePixel = 0

	tabButton.ZIndex = 99

	tabButton.AutoButtonColor = false

	tabButton.Visible = false

	tabButton.Parent = Window.SidebarScrollFrame

	Instance.new("UICorner", tabButton).CornerRadius = UDim.new(1, 0)

	

	local tabStroke = Instance.new("UIStroke")

	tabStroke.Color = Color3.new(0, 0, 0)

	tabStroke.Thickness = 1.5

	tabStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

	tabStroke.Parent = tabButton

	

	tabButton.MouseButton1Click:Connect(function()

		for name, frame in pairs(settingsTabs) do

			frame.Visible = (name == tabName)

		end

		Window.ClickSound:Play()

	end)

	

	settingsTabButtons[tabName] = tabButton

end

local savedScrollPositions = {}
local currentVisibleTab = nil

-- FIXED Settings Button Click Handler
local canClickSettings = true

settingsButton.MouseButton1Click:Connect(function()
	print("‚öôÔ∏è Settings button clicked!")
	
	if not canClickSettings then 
		print("‚è∏Ô∏è On cooldown, ignoring click")
		return 
	end
	
	canClickSettings = false
	clickSound:Play()
	
	if not Window.SettingsOpen then
		print("‚úÖ Opening settings menu...")
		
		Window.SettingsOpen = true
		
		-- FIXED: Rotate the BUTTON itself, not the image
		TweenService:Create(settingsButton, TweenInfo.new(0.3, Enum.EasingStyle.Back), {
			Rotation = -15
		}):Play()
		
		-- Save current tab state
		for sectionName, sectionFrame in pairs(Window.Sections) do
			if sectionFrame.Visible then
				currentVisibleTab = sectionName
				savedScrollPositions[sectionName] = sectionFrame.CanvasPosition
				print("üìå Saved current tab:", sectionName)
			end
			sectionFrame.Visible = false
		end
		
		-- Hide normal buttons, show settings buttons
		for _, tabButton in pairs(Window.TabButtons) do
			tabButton.Visible = false
		end
		for _, tabButton in pairs(settingsTabButtons) do
			tabButton.Visible = true
		end
		
		-- Show settings container with animation
		settingsTabsContainer.Visible = true
		settingsTabsContainer.Position = UDim2.new(0, 10, 0, -260)
		TweenService:Create(settingsTabsContainer, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
			Position = UDim2.new(0, 10, 0, 10)
		}):Play()
		
		-- Show Settings tab by default
		for name, frame in pairs(settingsTabs) do
			frame.Visible = (name == "Settings")
		end
		
		print("‚úÖ Settings opened successfully!")
		
	else
		print("‚ùå Closing settings menu...")
		
		Window.SettingsOpen = false
		
		-- FIXED: Rotate back to 0
		TweenService:Create(settingsButton, TweenInfo.new(0.3, Enum.EasingStyle.Back), {
			Rotation = 0
		}):Play()
		
		-- Show normal buttons, hide settings buttons
		for _, tabButton in pairs(settingsTabButtons) do
			tabButton.Visible = false
		end
		for _, tabButton in pairs(Window.TabButtons) do
			tabButton.Visible = true
		end
		
		-- Slide up animation
		TweenService:Create(settingsTabsContainer, TweenInfo.new(0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.In), {
			Position = UDim2.new(0, 10, 0, -260)
		}):Play()
		
		task.delay(0.4, function()
			settingsTabsContainer.Visible = false
			
			-- Restore previous tab
			if currentVisibleTab then
				for sectionName, sectionFrame in pairs(Window.Sections) do
					if sectionName == currentVisibleTab then
						sectionFrame.Visible = true
						if savedScrollPositions[sectionName] then
							sectionFrame.CanvasPosition = savedScrollPositions[sectionName]
						end
						print("üîô Restored tab:", sectionName)
					end
				end
			end
		end)
		
		print("‚ùå Settings closed successfully!")
	end
	
	task.delay(0.5, function()
		canClickSettings = true
	end)
end)

function Window:CreateTab(name)  

	Window.TabIndex = Window.TabIndex + 1  

	  

	local scrollFrame = Instance.new("ScrollingFrame")  

	scrollFrame.Name = name  

	scrollFrame.Size = UDim2.new(1, -20, 1, -20)  

	scrollFrame.Position = UDim2.new(0, 10, 0, 10)  

	scrollFrame.BackgroundTransparency = 1  

	scrollFrame.BorderSizePixel = 0  

	scrollFrame.ScrollBarThickness = 6  

	scrollFrame.ScrollBarImageColor3 = Color3.new(0, 0, 0)  

	scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)  

	scrollFrame.Visible = false  

	scrollFrame.ZIndex = 99  

	scrollFrame.Parent = Window.WhiteUnderFrame  

	  

	local layout = Instance.new("UIListLayout")  

	layout.SortOrder = Enum.SortOrder.LayoutOrder  

	layout.Padding = UDim.new(0, 8)  

	layout.Parent = scrollFrame  

local contentPadding = Instance.new("UIPadding")

contentPadding.PaddingLeft = UDim.new(0, 6)

contentPadding.Parent = scrollFrame

	layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()  

		scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)  

	end)  

	  

	local label = Instance.new("TextLabel")  

	label.Size = UDim2.new(1, 0, 0, 30)  

	label.BackgroundTransparency = 1  

	label.Font = Enum.Font.GothamBold  

	label.Text = "Section: " .. name  

	label.TextColor3 = Color3.new(0, 0, 0)  

	label.TextSize = 16  

	label.TextXAlignment = Enum.TextXAlignment.Left  

	label.ZIndex = 99  

	label.LayoutOrder = 0  

	label.Parent = scrollFrame  

	  

	Window.Sections[name] = scrollFrame  

	  

	local button = Instance.new("TextButton")

	button.Size = UDim2.new(0, 90, 0, 26)

	button.LayoutOrder = Window.TabIndex  

	button.BackgroundColor3 = Color3.fromRGB(230, 230, 230)  

	button.Text = "" .. name  

	button.Font = Enum.Font.Gotham  

	button.TextSize = 14  

	button.TextColor3 = Color3.new(0, 0, 0)  

	button.BorderSizePixel = 0  

	button.ZIndex = 99  

	button.AutoButtonColor = false  

	button.Parent = Window.SidebarScrollFrame  

	Instance.new("UICorner", button).CornerRadius = UDim.new(1, 0)  

	  

	local buttonStroke = Instance.new("UIStroke")  

	buttonStroke.Color = Color3.new(0, 0, 0)  

	buttonStroke.Thickness = 1.5  

	buttonStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

	buttonStroke.Parent = button  

	  

	button.MouseButton1Click:Connect(function()
		-- FIXED: Only switch if not in settings mode
		if not Window.SettingsOpen then
			for sectionName, sectionFrame in pairs(Window.Sections) do  

				sectionFrame.Visible = (sectionName == name)  

			end  

			Window.ClickSound:Play()
		end
	end)  

	  

	Window.TabButtons[name] = button  

	  

	local Tab = {  

		Name = name,  

		Frame = scrollFrame,  

		Button = button,  

		ElementCount = 1  

	}  

	  
function Tab:AddWarning(text)

	Tab.ElementCount = Tab.ElementCount + 1

	

	local warningContainer = Instance.new("Frame")

	warningContainer.Size = UDim2.new(0.98, 0, 0, 75)

	warningContainer.Position = UDim2.new(0.025, 0, 0, 0)

	warningContainer.BackgroundTransparency = 1

	warningContainer.BorderSizePixel = 0

	warningContainer.ZIndex = 99

	warningContainer.LayoutOrder = Tab.ElementCount

	warningContainer.Parent = scrollFrame

	

	local warningLabel = Instance.new("Frame")

	warningLabel.Size = UDim2.new(0, 100, 0, 22)

	warningLabel.Position = UDim2.new(0, 10, 0, 0)

	warningLabel.BackgroundColor3 = Color3.fromRGB(255, 200, 200)

	warningLabel.BorderSizePixel = 0

	warningLabel.ZIndex = 101

	warningLabel.Parent = warningContainer

	

	local labelCorner = Instance.new("UICorner")

	labelCorner.CornerRadius = UDim.new(0, 6)

	labelCorner.Parent = warningLabel

	

	local labelStroke = Instance.new("UIStroke")

	labelStroke.Color = Color3.new(0, 0, 0)

	labelStroke.Thickness = 2

	labelStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

	labelStroke.Parent = warningLabel

	

	local warningText = Instance.new("TextLabel")

	warningText.Size = UDim2.new(1, 0, 1, 0)

	warningText.BackgroundTransparency = 1

	warningText.Text = "WARNING!"

	warningText.Font = Enum.Font.GothamBold

	warningText.TextSize = 14

	warningText.TextColor3 = Color3.fromRGB(220, 60, 60)

	warningText.TextXAlignment = Enum.TextXAlignment.Center

	warningText.TextYAlignment = Enum.TextYAlignment.Center

	warningText.ZIndex = 102

	warningText.Parent = warningLabel

	

	local contentFrame = Instance.new("Frame")

	contentFrame.Size = UDim2.new(1, 0, 0, 60)

	contentFrame.Position = UDim2.new(0, 0, 0, 15)

	contentFrame.BackgroundColor3 = Color3.fromRGB(255, 200, 200)

	contentFrame.BackgroundTransparency = 0

	contentFrame.BorderSizePixel = 0

	contentFrame.ZIndex = 100

	contentFrame.Parent = warningContainer

	

	local contentCorner = Instance.new("UICorner")

	contentCorner.CornerRadius = UDim.new(0, 12)

	contentCorner.Parent = contentFrame

	

	local contentStroke = Instance.new("UIStroke")

	contentStroke.Color = Color3.new(0, 0, 0)

	contentStroke.Thickness = 2

	contentStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

	contentStroke.Parent = contentFrame

	

	local textLabel = Instance.new("TextLabel")

	textLabel.Size = UDim2.new(1, -20, 1, -20)

	textLabel.Position = UDim2.new(0, 10, 0, 10)

	textLabel.BackgroundTransparency = 1

	textLabel.Text = text

	textLabel.Font = Enum.Font.Gotham

	textLabel.TextSize = 16

	textLabel.TextColor3 = Color3.fromRGB(220, 60, 60)

	textLabel.TextXAlignment = Enum.TextXAlignment.Left

	textLabel.TextYAlignment = Enum.TextYAlignment.Center

	textLabel.TextWrapped = true

	textLabel.TextScaled = true

	textLabel.ZIndex = 100

	textLabel.Parent = contentFrame

	

	local textSizeConstraint = Instance.new("UITextSizeConstraint")

	textSizeConstraint.MinTextSize = 12

	textSizeConstraint.MaxTextSize = 16

	textSizeConstraint.Parent = textLabel

	

	return warningContainer

end

	function Tab:AddButton(text, callback)  

	Tab.ElementCount = Tab.ElementCount + 1  

	  

	local btn = Instance.new("Frame")  

	btn.Size = UDim2.new(1, -10, 0, 50)

	btn.BackgroundColor3 = Color3.fromRGB(240, 240, 240)

	btn.BackgroundTransparency = 0.2

	btn.BorderSizePixel = 0  

	btn.ZIndex = 99  

	btn.LayoutOrder = Tab.ElementCount  

	btn.Parent = scrollFrame  

	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 12)

	  

	local btnStroke = Instance.new("UIStroke")  

	btnStroke.Color = Color3.new(0, 0, 0)  

	btnStroke.Thickness = 2

	btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

	btnStroke.Parent = btn  

	  

local label = Instance.new("TextLabel")

label.Size = UDim2.new(1, -20, 1, 0)

label.Position = UDim2.new(0, 10, 0, 0)

label.BackgroundTransparency = 1

label.Text = text

label.Font = Enum.Font.GothamBold

label.TextSize = 18

label.TextColor3 = Color3.new(0, 0, 0)

label.TextXAlignment = Enum.TextXAlignment.Center

label.TextYAlignment = Enum.TextYAlignment.Center

label.TextWrapped = true

label.TextScaled = true

label.ZIndex = 99

label.Parent = btn

local textSizeConstraint = Instance.new("UITextSizeConstraint")

textSizeConstraint.MinTextSize = 10

textSizeConstraint.MaxTextSize = 18

textSizeConstraint.Parent = label

	  

	btn.InputBegan:Connect(function(input)  

		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then

			Window.ClickSound:Play()  

			if callback then  

				callback()  

			end  

		end

	end)  

	  

	return btn  

end

-- Continue with all other Tab methods (AddInfo, AddSlider, AddSeparator, AddToggle, AddDropdown, AddDropdownSingle)
-- [Rest of the Tab methods remain the same as your original code - I'm omitting them here for brevity]
-- Just copy them from your original script

	return Tab

end

return Window

end

function Library:CreateNotification(text, duration)

	local player = game.Players.LocalPlayer

	duration = duration or 5

	local gui = Instance.new("ScreenGui")  

	gui.Name = "CustomNotification"  

	gui.ResetOnSpawn = false  

	gui.IgnoreGuiInset = true  

	gui.Parent = player:WaitForChild("PlayerGui")  

	local notifFrame = Instance.new("Frame")  

	notifFrame.Name = "NotifFrame"  

	notifFrame.Size = UDim2.new(0.6, 0, 0.11, 0)  

	notifFrame.Position = UDim2.new(0.5, 0, 0.93, 0)  

	notifFrame.AnchorPoint = Vector2.new(0.5, 0.5)  

	notifFrame.BackgroundColor3 = Color3.new(1, 1, 1)  

	notifFrame.BorderSizePixel = 0  

	notifFrame.ClipsDescendants = true  

	notifFrame.Parent = gui  

	local scale = Instance.new("UIScale")  

	scale.Scale = 0  

	scale.Parent = notifFrame  

	local stroke = Instance.new("UIStroke")  

	stroke.Thickness = 1.5  

	stroke.Color = Color3.fromRGB(100, 100, 100)  

	stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border  

	stroke.Parent = notifFrame  

	local notifText = Instance.new("TextLabel")  

	notifText.Size = UDim2.new(1, -20, 1, -10)  

	notifText.Position = UDim2.new(0, 10, 0.3, 0)  

	notifText.BackgroundTransparency = 1  

	notifText.Text = text  

	notifText.TextColor3 = Color3.new(0, 0, 0)  

	notifText.Font = Enum.Font.Gotham  

	notifText.TextSize = 22  

	notifText.TextWrapped = true  

	notifText.TextXAlignment = Enum.TextXAlignment.Left  

	notifText.TextYAlignment = Enum.TextYAlignment.Top  

	notifText.Parent = notifFrame  

	local cooldownLine = Instance.new("Frame")  

	cooldownLine.Name = "CooldownLine"  

	cooldownLine.BackgroundColor3 = Color3.new(0, 0, 0)  

	cooldownLine.BorderSizePixel = 0  

	cooldownLine.Position = UDim2.new(0, 0, 1, 0)  

	cooldownLine.Size = UDim2.new(1, 0, 0, 4)  

	cooldownLine.AnchorPoint = Vector2.new(0, 1)  

	cooldownLine.Parent = notifFrame  

	TweenService:Create(scale, TweenInfo.new(0.4, Enum.EasingStyle.Back), { Scale = 1 }):Play()  

	task.delay(0.4, function()  

		local cooldownTween = TweenService:Create(  

			cooldownLine,  

			TweenInfo.new(duration, Enum.EasingStyle.Linear),  

			{ Size = UDim2.new(0, 0, 0, 4) }  

		)  

		cooldownTween:Play()  

		cooldownTween.Completed:Connect(function()  

			local shrinkTween = TweenService:Create(  

				scale,  

				TweenInfo.new(0.4, Enum.EasingStyle.Quad),  

				{ Scale = 0 }  

			)  

			shrinkTween:Play()  

			shrinkTween.Completed:Connect(function()  

				gui:Destroy()  

			end)  

		end)  

	end)

end

return Library
